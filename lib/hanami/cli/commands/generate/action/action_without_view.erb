<%- length = classified_controller_name.split("::").size -%>
<%- class_level_indentation = " " * (length * 2) -%>
module <%= app.classify %>
  module Controllers
  <%- classified_controller_name.split("::").each_with_index do |module_name, index| -%>
    <%= " " * (index * 2) + "module #{module_name}" %>
  <%- end -%>
    <%= class_level_indentation + "class #{action.classify}" %>
      <%= class_level_indentation + "include #{app.classify}::Action" %>

      <%= class_level_indentation + "def call(params)" %>
        <%= class_level_indentation + "self.body = 'OK'" %>
      <%= class_level_indentation + "end" %>
    <%= class_level_indentation + "end" %>
  <%- classified_controller_name.split("::").each_with_index do |module_name, index| -%>
    <%= " " * ((length - index - 1) * 2) + "end" %>
  <%- end -%>
  end
end
